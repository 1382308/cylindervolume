<!doctype html>
<html lang="es" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculador de Cilindros</title>

  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <style>
    * { font-family: 'Nunito', sans-serif; }
    body { box-sizing: border-box; }

    /* ‚úÖ FIX iOS/Reduce Motion: visible por defecto; animaci√≥n solo si se permite */
    .formula-step{
      opacity: 1;
      transform: translateX(0);
      will-change: opacity, transform;
    }
    @media (prefers-reduced-motion: no-preference) {
      .formula-step{
        opacity: 0;
        transform: translateX(20px);
        animation: fadeInStep 0.55s ease forwards;
      }
    }
    @keyframes fadeInStep { to { opacity: 1; transform: translateX(0); } }

    .result-box { animation: pulseResult 2s ease-in-out infinite; }
    @keyframes pulseResult{
      0%,100%{ box-shadow: 0 0 0 0 rgba(16,185,129,0.4); }
      50%{ box-shadow: 0 0 0 10px rgba(16,185,129,0); }
    }

    /* Solo por est√©tica: un ‚Äúglow‚Äù suave en cards */
    .card-glow { box-shadow: 0 10px 40px rgba(0,0,0,0.35); }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button { opacity: 1; height: 32px; }
  </style>
</head>

<body class="h-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-auto">
  <div class="min-h-full w-full p-6">

    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-4xl font-extrabold text-white mb-2 drop-shadow-lg">üî∑ Calculador de Cilindros</h1>
      <p class="text-purple-200 text-lg">Aprende a calcular el volumen paso a paso</p>
    </header>

    <!-- Orden: Recuerda -> Ingresa datos -> Procedimiento -> Resultado -->
    <div class="max-w-4xl mx-auto space-y-6">

      <!-- Recuerda -->
      <div class="p-5 bg-gradient-to-r from-amber-500/20 to-orange-500/20 rounded-3xl border border-amber-400/30 backdrop-blur-lg card-glow">
        <h3 class="text-amber-200 font-bold mb-3 text-sm uppercase tracking-wide">üìö Recuerda</h3>
        <div class="text-white space-y-2">
          <p class="flex items-center gap-2"><span class="text-amber-400">‚Ä¢</span> <span class="font-mono">œÄ (pi) ‚âà 3.14159...</span></p>
          <p class="flex items-center gap-2"><span class="text-amber-400">‚Ä¢</span> <span class="font-mono">r¬≤ significa r √ó r</span></p>
          <p class="flex items-center gap-2"><span class="text-amber-400">‚Ä¢</span> <span class="font-mono">u¬≥ = unidades c√∫bicas</span></p>
        </div>
      </div>

      <!-- Ingresa los datos -->
      <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 border border-white/20 card-glow">
        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <span class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center text-sm">üìù</span>
          Ingresa los datos
        </h2>

        <div class="space-y-5">
          <div class="group">
            <label class="block text-purple-200 font-semibold mb-2 text-sm uppercase tracking-wide">Radio (r)</label>
            <div class="relative">
              <input
                type="number"
                id="radio-input"
                min="0.1"
                step="0.1"
                value="5"
                class="w-full px-5 py-4 bg-white/10 border-2 border-purple-400/50 rounded-2xl text-white text-xl font-bold focus:outline-none focus:border-indigo-400 focus:bg-white/20 transition-all placeholder-purple-300/50"
                placeholder="Ej: 5"
              />
              <span class="absolute right-4 top-1/2 -translate-y-1/2 text-purple-300 font-medium">u</span>
            </div>
          </div>

          <div class="group">
            <label class="block text-purple-200 font-semibold mb-2 text-sm uppercase tracking-wide">Altura (h)</label>
            <div class="relative">
              <input
                type="number"
                id="altura-input"
                min="0.1"
                step="0.1"
                value="10"
                class="w-full px-5 py-4 bg-white/10 border-2 border-purple-400/50 rounded-2xl text-white text-xl font-bold focus:outline-none focus:border-indigo-400 focus:bg-white/20 transition-all placeholder-purple-300/50"
                placeholder="Ej: 10"
              />
              <span class="absolute right-4 top-1/2 -translate-y-1/2 text-purple-300 font-medium">u</span>
            </div>
          </div>

          <button
            id="calcular-btn"
            class="w-full py-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-bold text-lg rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2"
          >
            <span>‚ö°</span> Calcular Volumen
          </button>
        </div>
      </div>

      <!-- Procedimiento (animado como OG, pero seguro en iOS) -->
      <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-6 border border-white/20 card-glow">
        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
          <span class="w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-sm">üìê</span>
          Procedimiento
        </h2>
        <div id="procedimiento-container" class="space-y-4"></div>
      </div>

      <!-- Resultado -->
      <div id="resultado-panel" class="bg-gradient-to-br from-emerald-500/20 to-teal-500/20 backdrop-blur-lg rounded-3xl p-6 border border-emerald-400/30 card-glow">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-sm">‚ú®</span>
          Resultado
        </h2>
        <div class="result-box bg-white/10 rounded-2xl p-6 text-center border border-emerald-400/30">
          <p class="text-emerald-200 text-sm uppercase tracking-wide mb-2">Volumen del cilindro</p>
          <p id="resultado-valor" class="text-5xl font-extrabold text-white mb-1">785.40</p>
          <p class="text-emerald-300 text-xl font-semibold">u¬≥</p>
        </div>
      </div>

    </div>

    <footer class="mt-8 text-center text-purple-300/70 text-sm">
      <p>üí° El volumen de un cilindro es el espacio que ocupa en tres dimensiones</p>
    </footer>
  </div>

  <script>
    const radioInput = document.getElementById('radio-input');
    const alturaInput = document.getElementById('altura-input');
    const calcularBtn = document.getElementById('calcular-btn');
    const resultadoValor = document.getElementById('resultado-valor');
    const procedimientoContainer = document.getElementById('procedimiento-container');

    function calcularVolumen() {
      const r = parseFloat(radioInput.value) || 0;
      const h = parseFloat(alturaInput.value) || 0;

      if (r <= 0 || h <= 0) {
        resultadoValor.textContent = '---';
        procedimientoContainer.innerHTML = `
          <div class="bg-red-500/20 text-red-200 p-4 rounded-xl border border-red-400/30 text-center">
            ‚ö†Ô∏è Por favor ingresa valores mayores a cero
          </div>
        `;
        return;
      }

      const pi = Math.PI;
      const rCuadrado = r * r;
      const volumen = pi * rCuadrado * h;

      resultadoValor.textContent = volumen.toFixed(2);

      // ‚úÖ Re-render para que la animaci√≥n se ‚Äúreinicie‚Äù al recalcular
      procedimientoContainer.innerHTML = '';

      const pasos = [
        {
          titulo: 'Paso 1: F√≥rmula general',
          formula: 'V = œÄ ¬∑ r¬≤ ¬∑ h',
          explicacion: 'La f√≥rmula del volumen del cilindro',
          color: 'from-blue-500/20 to-indigo-500/20',
          borderColor: 'border-blue-400/30'
        },
        {
          titulo: 'Paso 2: Sustituir valores',
          formula: `V = œÄ ¬∑ (${r})¬≤ ¬∑ ${h}`,
          explicacion: `Reemplazamos r = ${r} y h = ${h}`,
          color: 'from-purple-500/20 to-pink-500/20',
          borderColor: 'border-purple-400/30'
        },
        {
          titulo: 'Paso 3: Calcular r¬≤',
          formula: `V = œÄ ¬∑ ${rCuadrado.toFixed(2)} ¬∑ ${h}`,
          explicacion: `${r} √ó ${r} = ${rCuadrado.toFixed(2)}`,
          color: 'from-amber-500/20 to-orange-500/20',
          borderColor: 'border-amber-400/30'
        },
        {
          titulo: 'Paso 4: Multiplicar',
          formula: `V = ${pi.toFixed(4)} ¬∑ ${(rCuadrado * h).toFixed(2)}`,
          explicacion: `${rCuadrado.toFixed(2)} √ó ${h} = ${(rCuadrado * h).toFixed(2)}`,
          color: 'from-teal-500/20 to-cyan-500/20',
          borderColor: 'border-teal-400/30'
        },
        {
          titulo: 'Paso 5: Resultado final',
          formula: `V = ${volumen.toFixed(2)} u¬≥`,
          explicacion: `${pi.toFixed(4)} √ó ${(rCuadrado * h).toFixed(2)} = ${volumen.toFixed(2)}`,
          color: 'from-emerald-500/20 to-green-500/20',
          borderColor: 'border-emerald-400/30',
          destacado: true
        }
      ];

      pasos.forEach((paso, index) => {
        const el = document.createElement('div');
        el.className =
          `formula-step bg-gradient-to-r ${paso.color} rounded-2xl p-5 border ${paso.borderColor} ` +
          (paso.destacado ? 'ring-2 ring-emerald-400/50' : '');

        // ‚úÖ Mantener el ‚Äústagger‚Äù visual del OG
        // (Esto funciona incluso si reduce-motion est√° activo; solo no animar√°, pero s√≠ se ver√°)
        el.style.animationDelay = `${index * 0.15}s`;

        el.innerHTML = `
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white font-bold text-sm flex-shrink-0">
              ${index + 1}
            </div>
            <div class="flex-1">
              <h4 class="text-white font-bold text-sm mb-2">${paso.titulo}</h4>
              <div class="bg-black/20 rounded-xl px-4 py-3 mb-2">
                <p class="text-white font-mono text-xl font-bold text-center">${paso.formula}</p>
              </div>
              <p class="text-purple-200 text-sm">${paso.explicacion}</p>
            </div>
          </div>
        `;

        procedimientoContainer.appendChild(el);
      });
    }

    calcularBtn.addEventListener('click', calcularVolumen);
    radioInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') calcularVolumen(); });
    alturaInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') calcularVolumen(); });

    calcularVolumen();
  </script>
</body>
</html>
